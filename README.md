# Repository setup

Using the package app-eselect/eselect-repository.

```
sudo eselect repository add ventura-repo git@github.com:jorgeventura/ventura-repo.git
```
# For the first time including into the project

```
cd <project directory>
git submodule add https://github.com/jorgeventura/ventura-repo.git
git submodule init
git submodule update
```

# Makefile.am

 Consider PACKAGE and VERSION generated by *autoconf* and category as app-example defined for portage.
 In the project tree, create a directory name gentoo that will contain the ebuilds.

 ```
 CATEGORY=this-cat

 git-push:
         @git push --recurse-submodules=on-demand
 
 create-ebuild:
         cp ./gentoo/$(PACKAGE).ebuild.in ventura-repo/$(CATEGORY)/$(PACKAGE)/$(PACKAGE)-$(VERSION).ebuild
 
 update-manifest:
         -rm /usr/portage/distfiles/$(PACKAGE)-$(VERSION).tar.gz
         -rm ./ventura-repo/$(CATEGORY)/$(PACKAGE)/Manifest
         -cp $(PACKAGE)-$(VERSION).tar.gz /usr/portage/distfiles/
         -chown portage:portage /usr/portage/distfiles/$(PACKAGE)-$(VERSION).tar.gz
         -chmod 0664 /usr/portage/distfiles/$(PACKAGE)-$(VERSION).tar.gz
         ebuild --force ./ventura-repo/$(CATEGORY)/$(PACKAGE)/$(PACKAGE)-$(VERSION).ebuild manifest

 ```

  Replace CATEGORY with the specific of your project. 


# Regular work with project

 1. Make changes
 2. compile using make program

 3. Create the source tarball

 ```
 make distcheck
 ```

 4. Create ebuild and copy

 ```
 make create-ebuild
 ```

 5. Update gentoo Manifest (root)

 ```
 sudo make update-manifest
 ```

 6. Update submodule

 ```
 cd ventura-repo
 git status
 git add <new untracked>.ebuild
 git commit -am'version n.n.n'
 git push
 cd ..
 ```
 7. Commit and push the project

 ```
 git commit -am'<custom message>'
 git push
 ```
 8. Re-sync ventura-repo (root)

 ```
 sudo emerge --sync rem-repo
 ```

